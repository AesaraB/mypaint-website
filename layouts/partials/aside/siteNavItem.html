{{ $currPage := (.Scratch.Get "currPage") }}
{{ $scopeIsCurr := (eq $currPage .) }}
{{ $sectionIsDescendant  := (.Scratch.Get "sectionIsDescendant") }}

{{ if .IsSection }} 
	<li>
		<details{{if or $sectionIsDescendant $scopeIsCurr }} open=""{{ end }}>
			<summary>
				<a {{if $scopeIsCurr }}class="selected"{{ end }} href="{{ .RelPermalink }}">{{ .Title }}</a>
			</summary>
			<ul>{{ range .Pages }}
					{{ .Scratch.Set "scopeIsCurr" (eq $.Page .) }}
					{{ partial "aside/siteNavItem.html" . }}
				{{ end }}
			</ul>
		</details>
	</li>
{{ else }}
	<li>
		<a {{if $scopeIsCurr }}class="selected"{{ end }} href="{{ .RelPermalink }}">{{ .Title }}</a>
	</li>
{{ end }}
